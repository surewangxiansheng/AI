(function(e){function t(t){for(var n,r,i=t[0],l=t[1],c=t[2],d=0,f=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],n=!0,i=1;i<s.length;i++){var l=s[i];0!==a[l]&&(n=!1)}n&&(o.splice(t--,1),e=r(r.s=s[0]))}return e}var n={},a={app:0},o=[];function r(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=n,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var n=s("85ec"),a=s.n(n);a.a},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("a026"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view",{staticClass:"home-page"})],1)},o=[],r={name:"app"},i=r,l=(s("034f"),s("2877")),c=Object(l["a"])(i,a,o,!1,null,null,null),u=c.exports,d=s("8c4f"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._m(0),s("section",{ref:"addContent",staticClass:"content has-foot",class:e.question.list.length>0?"":"has—no-words"},[s("el-scrollbar",{ref:"myScrollbar",staticStyle:{height:"100%"}},[s("div",{staticClass:"scroll"},[s("p",{directives:[{name:"show",rawName:"v-show",value:e.hasMore,expression:"hasMore"}],staticClass:"has-more-text",on:{"~click":function(t){return e.moreNew(t)}}},[e._v("点击可以查看历史消息哦")]),s("div",{staticClass:"list-container"},[s("ul",{staticClass:"list"},e._l(e.list,(function(t,n){return s("li",{key:n},[t.received?s("div",{staticClass:"message-received"},[t.title?s("p",{staticClass:"received-title"},[e._v(e._s(t.title))]):e._e(),s("p",{staticClass:"received-content"},e._l(t.content,(function(t,n){return s("span",{key:n,staticClass:"content-bold"},[e._v(e._s(t))])})),0),t.linkText?s("button",{staticClass:"button-link"},[s("a",{staticClass:"title_btn",attrs:{href:e.href}},[e._v(e._s(t.linkText))])]):e._e(),t.guessList.list?s("ul",{staticClass:"guess-list"},[s("li",{staticClass:"guess-title"},[e._v(e._s(t.guessList.title))]),e._l(t.guessList.list,(function(t,n){return s("li",{key:n,on:{click:function(s){return e.send(t)}}},[s("a",{attrs:{href:"#"}},[e._v("- "+e._s(t))])])}))],2):e._e(),t.feedback?s("dl",{staticClass:"feedback"},[s("dt",[e._v("问题")]),s("dd",{staticClass:"useful",style:{color:t.style},on:{"~click":function(s){return e.setUseful(t,!0)}}},[e._v(" 已解决")]),s("dd",{staticClass:"useless",style:{color:t.style2},on:{"~click":function(s){return e.setUseful(t,!1)}}},[e._v(" 未解决")])]):e._e(),t.tel?s("div",{staticClass:"tel-container"},[s("a",{staticClass:"button-tel",attrs:{href:"tel:123456"}},[e._v("联系人工客服")])]):e._e()]):e._e(),t.sent?s("div",{staticClass:"message-sent"},[s("p",{staticClass:"send-content"},[e._v(e._s(t.content))])]):e._e()])})),0)])])])],1),s("footer",{staticClass:"foot",class:e.question.list.length>0?"":"has—no-words",attrs:{id:"footer"}},[e.question.list.length>0?s("ul",{staticClass:"question-list"},e._l(e.question.list,(function(t,n){return s("li",{key:n,on:{click:function(s){return e.inputLine(t.hotwords)}}},[e._v(e._s(t.hotwords))])})),0):e._e(),s("form",{attrs:{name:"questionform"}},[s("div",{staticClass:"question flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.word,expression:"formData.word"}],staticClass:"flex-1",attrs:{type:"text",placeholder:"请输入您要咨询的问题"},domProps:{value:e.formData.word},on:{input:[function(t){t.target.composing||e.$set(e.formData,"word",t.target.value)},e.check]}}),s("button",{staticClass:"button-send",class:e.formData.word?"button-send-show":"",attrs:{type:"button"},on:{click:e.send}},[e._v("发送")])])])])])},p=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"head"},[s("div",{staticClass:"left-buttons"},[s("i",{staticClass:"icon-back"})]),s("h1",{staticClass:"head-title"},[e._v("智能客服")])])}],h=(s("b0c0"),s("d3b7"),s("ac1f"),s("5319"),s("1276"),s("bc3a")),v=s.n(h),m=v.a.create({timeout:1e4,baseURL:"http://localhost:9090"});function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m({url:e,method:"get",params:t})}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={url:e,method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t};return m(s)}m.interceptors.request.use((function(e){return"get"==e.method&&(e.data=!0),e}),(function(e){Promise.reject(e)})),m.interceptors.response.use((function(e){return e}),(function(e){switch(e.response.status){case 400:e.response.message="错误请求",alert(e.response.message);break;case 401:e.response.message="未授权，请重新登录",alert(e.response.message);break;case 403:e.response.message="拒绝访问",alert(e.response.message);break;case 404:e.response.message="请求错误,未找到该资源",alert(e.response.message);break;default:e.response.message="服务繁忙，请稍后再试",alert(e.response.message);break}return Promise.reject(e.response)}));var w=function(e){return g("/searchWords",e)},y=function(e){return b("/words",e)},_=function(e){return b("/word/useful",e)},k=function(e){return b("/word/unuseful",e)},C={name:"aiservice",data:function(){return{formData:{word:""},list:[{received:!0,content:["Hi~您好，我是睿智的机器人，为您提供自助服务，请问有什么想对我说的吗？"],guessList:{title:"",list:[]},feedback:!1,useful:!0,tel:!1,style:"",style2:"",disabled:!1}],linkText:"",hasMore:!0,hasFeedback:!1,question:{list:[]},database:{name:"aiservice",store:"message",version:1},historymsg:!0,secret:"",uid:"",sec:""}},computed:{week:function(){var e=["日","一","二","三","四","五","六"];return"星期"+e[(new Date).getDay()]}},mounted:function(){var e=this.$refs.addContent;setTimeout((function(){var t=document.querySelector(".foot").clientHeight;e.style.bottom=t/16+2+"rem"}),1500)},created:function(){this.getHotwordMethod(),this.isIndexedDB()},methods:{getHotwordMethod:function(e){var t=this;w(e).then((function(e){t.question.list=e.data.words||[],console.log(e)})).catch((function(e){var s={received:!0,feedback:!1,useful:!1,tel:!1,content:e.response.data?e.response.data.split("\n"):e.message.split("\n"),guessList:{list:[]}};t.list.push(s),t.save(t.list)}))},postWordMethod:function(e){var t=this;y(e).then((function(e){if("时间"==e.data.say){var s={received:!0,feedback:!0,useful:!1,tel:!1,content:[t.getDate()],guessList:{list:[]}};return t.list.push(s),void t.save(t.list)}if("星期"==e.data.say){s={received:!0,feedback:!0,useful:!1,tel:!1,content:["今天是"+t.week],guessList:{list:[]}};return t.list.push(s),void t.save(t.list)}e.data.jumps&&(t.href=e.data.jumps[0].uri);var n=e.data.say.replace(/\&nbsp/g,"");s={received:!0,feedback:!0,useful:!0,tel:!0,linkText:e.data.jumps?e.data.jumps[0].title||"":e.data.jumps,content:n.split("\n"),guessList:{}};console.log(s),e.data.guides&&(s.guessList={title:"猜您想问：",list:e.data.guides}),t.list.push(s),t.save(t.list)})).catch((function(e){var t={received:!0,feedback:!1,useful:!1,tel:!1,content:e.response.data?e.response.data.split("\n"):e.message.split("\n"),guessList:{list:[]}};self.list.push(t),self.save(self.list)}))},postWordUsefulMethod:function(e){var t=this;_(e).then((function(e){var s={received:!0,feedback:!1,useful:!1,tel:!1,content:e.data.say.split("\n"),guessList:{list:[]}};t.list.push(s),t.save(t.list)})).catch((function(e){var s={received:!0,feedback:!1,useful:!1,tel:!1,content:e.response.data?e.response.data.split("\n"):e.message.split("\n"),guessList:{list:[]}};t.list.push(s),t.save(t.list)}))},postWordUnusefulMethod:function(e){var t=this;k(e).then((function(e){var s={received:!0,feedback:!1,useful:!1,tel:!1,content:e.data.say.split("\n"),guessList:{list:[]}};t.list.push(s),t.save(t.list)})).catch((function(e){var s={received:!0,feedback:!1,useful:!1,tel:!1,content:e.response.data?e.response.data.split("\n"):e.message.split("\n"),guessList:{list:[]}};t.list.push(s),t.save(t.list)}))},isIndexedDB:function(){var e=this;this.openDatabase().then((function(t){var s=t.transaction([e.database.store]).objectStore(e.database.store).get(e.uid);s.onsuccess=function(t){s.result?e.hasMore=!0:e.hasMore=!1}}),(function(e){console.log("open database error",e)}))},getDate:function(){var e,t=new Date,s=t.getHours(),n=t.getMinutes();s>12?(s-=12,e=" PM"):e=" AM",s=s<10?"0"+s:s,n=n<10?"0"+n:n;var a=s+":"+n;return a+=e,a},moreNew:function(){if(this.hasMore){this.historymsg=!1;var e=this;this.openDatabase().then((function(t){var s=t.transaction([e.database.store]).objectStore(e.database.store).get(e.uid);s.onsuccess=function(t){if(s.result)for(var n=s.result.message.reverse(),a=0,o=n.length;a<o;a++)e.list.unshift(n[a]);e.hasMore=!1},s.onerror=function(e){console.log(e)}}),(function(e){console.log("open database error",e)}))}},check:function(){this.formData.word},send:function(e){e&&"string"===typeof e||(e=this.formData.word,this.formData.word=""),this.list.push({sent:!0,content:e}),this.postWordMethod({text:e})},setUseful:function(e,t){console.log(e),e.disabled||(e.disabled=!0,!0===t?(e.style="#477bef",e.style2="silver"):(e.style="silver",e.style2="#477bef"),this.list.push({sent:!0,content:t?"已解决":"未解决"}),!0===t?this.postWordUsefulMethod():this.postWordUnusefulMethod())},inputLine:function(e){this.formData.word=e},save:function(e){var t=this,s=this.database;this.openDatabase().then((function(n){var a=n.transaction([s.store],"readwrite").objectStore(s.store).put({id:t.uid,message:e});a.onsuccess=function(){console.log("save success")},a.onerror=function(e){console.log("save error",e)},n.close()}))},openDatabase:function(){var e=this.database;return new Promise((function(t,s){var n=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(n){var a=n.open(e.name,e.version);a.onsuccess=r,a.onerror=i,a.onupgradeneeded=o}else s("not support");function o(s){var n,a=s.currentTarget.result;a.objectStoreNames.contains(e.store)&&a.deleteObjectStore(e.store),n=a.createObjectStore(e.store,{keyPath:"id"}),n.transaction.oncomplete=function(){t(a)},n.transaction.onerror=i}function r(e){t(a.result)}function i(e){s(e)}}))}},updated:function(){this.$refs["myScrollbar"].wrap.scrollTop=this.$refs["myScrollbar"].wrap.scrollHeight}},x=C,j=Object(l["a"])(x,f,p,!1,null,"7a723792",null),D=j.exports;n["default"].use(d["a"]);var M=[{path:"/",name:"aiservice",component:D}],L=new d["a"]({routes:M}),S=L,O=s("2f62");n["default"].use(O["a"]);var P=new O["a"].Store({state:{text:"测试"},mutations:{},actions:{},modules:{}}),T=(s("1951"),s("450d"),s("eedf")),q=s.n(T),U=(s("2986"),s("14e9")),$=s.n(U);n["default"].use($.a),n["default"].use(q.a);s("6672");n["default"].prototype.$axios=v.a,n["default"].config.productionTip=!1,new n["default"]({router:S,store:P,render:function(e){return e(u)}}).$mount(app)},6672:function(e,t,s){},"85ec":function(e,t,s){}});